diff --git a/dlls/msvcrt/file.c b/dlls/msvcrt/file.c
index 01853625c23f043f636ca3ff3e3fefca11464c81..a66ced17d4c62ed1c3ef1359064e13a564ec258d 100644
--- a/dlls/msvcrt/file.c
+++ b/dlls/msvcrt/file.c
@@ -828,6 +828,7 @@ void msvcrt_init_io(void)
       cs->DebugInfo->Spare[0] = (DWORD_PTR)(__FILE__ ": file_crit.crit");
     }
   }
+  _setmaxstdio(MSVCRT_MAX_FILES);
   MSVCRT_stream_idx = 3;
 }
 
